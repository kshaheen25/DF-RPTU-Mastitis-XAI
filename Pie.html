<!DOCTYPE html>
<html>
<head>
    <title>Feature Contribution Pie Charts</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>
<body>
    <h2>Feature Contribution for Second Last Record (Combined Features)</h2>
    <canvas id="pieChart1"></canvas>
    
    <h2>Feature Contribution for Last Record (Combined Features)</h2>
    <canvas id="pieChart2"></canvas>
    
    <script>
        const data1 = {
            labels: ['Months_after_giving_birth', 'FL', 'FR', 'RL', 'RR', 'Temperature'],
            datasets: [{
                data: [0, Math.abs(-0.03501506 + 0.03168124), Math.abs(0.12983159 + 0.08551685), Math.abs(0.01555764 + 0.01614246), Math.abs(0 + 0.01866348), Math.abs(0.00627204)],
                backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'],
                hoverOffset: 4
            }]
        };

        const config1 = {
            type: 'pie',
            data: data1,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += Math.round(context.raw * 100) / 100;
                                return label;
                            }
                        }
                    },
                    datalabels: {
                        formatter: (value, context) => {
                            let total = context.chart._metasets[0].total;
                            let percentage = (value / total * 100).toFixed(1) + '%';
                            return percentage;
                        },
                        color: '#fff',
                    }
                }
            },
            plugins: [ChartDataLabels],
        };

        const data2 = {
            labels: ['Months_after_giving_birth', 'FL', 'FR', 'RL', 'RR', 'Temperature'],
            datasets: [{
                data: [0, Math.abs(0.16671282 + 0.07877897), Math.abs(-0.03249917 + 0.0092327), Math.abs(-0.01321419 + 0.02984047), Math.abs(0.00667839 - 0.00744425), Math.abs(0.008913)],
                backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'],
                hoverOffset: 4
            }]
        };

        const config2 = {
            type: 'pie',
            data: data2,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += Math.round(context.raw * 100) / 100;
                                return label;
                            }
                        },
                    },
                    datalabels: {
                        formatter: (value, context) => {
                            let total = context.chart._metasets[0].total;
                            let percentage = (value / total * 100).toFixed(1) + '%';
                            return percentage;
                        },
                        color: '#fff',
                    }
                }
            },
            plugins: [ChartDataLabels],
        };

        window.onload = function() {
            const ctx1 = document.getElementById('pieChart1').getContext('2d');
            const pieChart1 = new Chart(ctx1, config1);

            const ctx2 = document.getElementById('pieChart2').getContext('2d');
            const pieChart2 = new Chart(ctx2, config2);
        };
    </script>
</body>
</html>
